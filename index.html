<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Anthony's Brain</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Fraunces:wght@500;700&family=Source+Serif+4:wght@400;600&display=swap");

      :root {
        --bg: #f2efe7;
        --ink: #171512;
        --accent: #5c4033;
        --accent-2: #2f4b3a;
        --card: #fff8ee;
      }

      * { box-sizing: border-box; }

      html, body {
        height: 100%;
        margin: 0;
      }

      body {
        font-family: "Source Serif 4", "Georgia", serif;
        color: var(--ink);
        background:
          radial-gradient(800px 400px at 15% 10%, #fff6e6 0%, rgba(255, 246, 230, 0.6) 45%, transparent 60%),
          radial-gradient(700px 380px at 90% 15%, #e7f0e7 0%, rgba(231, 240, 231, 0.5) 45%, transparent 60%),
          linear-gradient(180deg, #f7f1e8 0%, var(--bg) 55%, #efe8db 100%);
        display: grid;
        place-items: center;
        padding: 24px;
      }

      .page {
        width: min(980px, 100%);
      }

      .hero {
        display: grid;
        gap: 18px;
        background: var(--card);
        border: 1px solid #e2d8c6;
        border-radius: 20px;
        padding: clamp(22px, 4vw, 34px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      }

      .title {
        font-family: "Fraunces", serif;
        font-size: clamp(30px, 4.5vw, 46px);
        margin: 0;
        color: var(--accent-2);
        letter-spacing: 0.02em;
      }

      .subtitle {
        margin: 0;
        font-size: clamp(16px, 2.2vw, 20px);
        color: #4a433a;
      }

      .cta-grid {
        display: grid;
        gap: 12px;
        margin-top: 6px;
      }

      .cta {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 14px 18px;
        border-radius: 999px;
        border: 1px solid #d6cec3;
        background: #fff;
        color: var(--accent);
        text-decoration: none;
        font-weight: 600;
        justify-content: center;
      }

      .cta:hover {
        background: #f7f4ef;
      }

      .note {
        font-size: 13px;
        color: #6b6054;
      }

      .prices {
        margin-top: 10px;
        padding: 14px 16px;
        border-radius: 16px;
        background: #fbf7ef;
        border: 1px solid #e7ddcc;
        display: grid;
        gap: 8px;
      }

      .prices-title {
        font-weight: 600;
        color: #4a433a;
      }

      .price-row {
        display: grid;
        grid-template-columns: 1.4fr 0.8fr 1fr;
        gap: 8px;
        align-items: center;
        font-size: 14px;
      }

      .price-value {
        font-weight: 600;
        color: var(--accent-2);
      }

      .price-change {
        font-variant-numeric: tabular-nums;
        color: #6b6054;
      }

      .price-time {
        font-size: 12px;
        color: #6b6054;
      }

      @media (max-width: 720px) {
        .cta {
          justify-content: center;
        }
        .price-row {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <main class="page">
      <section class="hero">
        <h1 class="title">Anthony's Brain</h1>
        <p class="subtitle">Quick links to daily ideas, tools, and reflections.</p>

        <div class="cta-grid">
          <a class="cta" href="https://obstacletheway.github.io/WOD/" target="_blank" rel="noreferrer">Word of the Day</a>
          <a class="cta" href="https://obstacletheway.github.io/Stoics/" target="_blank" rel="noreferrer">Stoic Thoughts</a>
          <a class="cta" href="https://deephealth.com/psa-density-calculator/" target="_blank" rel="noreferrer">Prostate</a>
          <a class="cta" href="https://www.uptodate.com/contents/calculator-solitary-pulmonary-nodule-malignancy-risk-in-adults-brock-university-cancer-prediction-equation" target="_blank" rel="noreferrer">PanCan</a>
          <a class="cta" href="https://www.radiology.no/vdt/" target="_blank" rel="noreferrer">VDT</a>
          <a class="cta" href="https://www.acr.org/Clinical-Resources/Clinical-Tools-and-Reference/Reporting-and-Data-Systems/O-RADS" target="_blank" rel="noreferrer">O-RADS</a>
        </div>

        <section class="prices" aria-live="polite">
          <div class="prices-title">Latest Share Prices</div>
          <div class="price-row" data-symbol="EMV.AX">
            <div>EMV.AX (Emvision)</div>
            <div class="price-value">Loading…</div>
            <div class="price-change"></div>
          </div>
          <div class="price-row" data-symbol="ADUR">
            <div>ADUR (Aduro Clean Technologies)</div>
            <div class="price-value">Loading…</div>
            <div class="price-change"></div>
          </div>
          <div class="price-time" id="priceTime"></div>
        </section>

        <p class="note">Opens each resource in a new tab.</p>
      </section>
    </main>
    <script>
      const priceRows = [
        { symbol: "EMV.AX", label: "EMV.AX (Emvision)" },
        { symbol: "ADUR", label: "ADUR (Aduro Clean Technologies)" }
      ];

      const proxyBase = "https://api.allorigins.win/raw?url=";

      function formatChange(change, changePct) {
        if (typeof change !== "number" || typeof changePct !== "number") return "";
        const sign = change >= 0 ? "+" : "";
        return `${sign}${change.toFixed(2)} (${sign}${changePct.toFixed(2)}%)`;
      }

      function formatTime(epochSeconds) {
        if (!epochSeconds) return "";
        const dt = new Date(epochSeconds * 1000);
        return `Updated: ${dt.toLocaleString()}`;
      }

      async function fetchQuote(symbol) {
        const url = `https://query1.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(symbol)}?range=1d&interval=1d&includePrePost=false&corsDomain=finance.yahoo.com`;
        const res = await fetch(proxyBase + encodeURIComponent(url));
        if (!res.ok) throw new Error("Quote request failed");
        const data = await res.json();
        const meta = data?.chart?.result?.[0]?.meta;
        if (!meta) throw new Error("Quote unavailable");
        return {
          price: meta.regularMarketPrice,
          change: meta.regularMarketChange,
          changePct: meta.regularMarketChangePercent,
          currency: meta.currency,
          time: meta.regularMarketTime
        };
      }

      async function loadPrices() {
        const timeEl = document.getElementById("priceTime");
        let latestTime = 0;

        await Promise.all(priceRows.map(async ({ symbol }) => {
          const row = document.querySelector(`.price-row[data-symbol="${symbol}"]`);
          const valueEl = row.querySelector(".price-value");
          const changeEl = row.querySelector(".price-change");

          try {
            const q = await fetchQuote(symbol);
            const currency = q.currency ? ` ${q.currency}` : "";
            valueEl.textContent = typeof q.price === "number" ? `${q.price.toFixed(2)}${currency}` : "Unavailable";
            changeEl.textContent = formatChange(q.change, q.changePct);
            if (q.time && q.time > latestTime) latestTime = q.time;
          } catch (err) {
            valueEl.textContent = "Unavailable";
            changeEl.textContent = "";
          }
        }));

        timeEl.textContent = latestTime ? formatTime(latestTime) : "Updated: unavailable";
      }

      loadPrices();
    </script>
  </body>
</html>
